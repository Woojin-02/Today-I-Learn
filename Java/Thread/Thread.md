# Thread

### 1. 스레드
* 사용자가 작성한 코드로서, JVM에 의해 스케줄링되어 실행되는 단위
* 자바의 멀티태스킹은 멀티스레딩만 가능하다.
    * 멀티스레딩으로 한 스레드가 대기하는 동안 다른 스레드를 실행하여 전체적으로 프로그램의 지연 시간을 줄일 수 있다.

### 2. 자바 스레드
* JVM(자바 가상 기계)에 의해 스케쥴되는 실행 단위의 코드 블럭
* 스레드의 생명 주기는 JVM에 의해 관리된다.
* JVM 하나는 자바 응용프로그램 하나만 실행하며, 하나의 응용 프로그램은 하나 이상의 스레드로 구성할 수 있다.

### 3. 스레드 구현
**1. java.lang.Tread 클래스**
* 스레드 클래스 작성 : Thread 클래스 상속 및 새 클래스 작성
* 스레드 코드 작성
* 스레드 객체 생성
* 스레드 시작
순서로 진행됨

**2. java.lang.Runnable 인터페이스**
* 스레드 클래스 작성 : Runnable 인터페이스 구현하는 새 클래스 작성
* 스레드 코드 작성
* 스레드 객체 생성
* 스레드 시작
순서로 진행됨

### 4. 스레드 상태
* New : 스레드가 생성되었지만 아직 실행할 준비가 되지 않음
* Runnable : 스레드가 현재 실행되고 있거나 실행 준비가 되어 스케쥴링을 기다림
* Waiting : wait()를 호출한 상태 = 다른 스래드가 notify()나 notifyAll()을 불러주기를 기다리고 있음
* Timed_Waiting : sleep(n)을 호출하여 n 밀리초 동안 잠을 자고 있는 상태
* Block : 스레드가 I/O 작업을 요청하면 JVM이 자동으로 Block 상태로 만듦
* Terminated : 스레드가 종료된 상태

### 5. 스레드 우선순위
* 최대값 = 10(MAX_PRIORITY)
* 보통값 = 5(NORMAL_PRIORITY) = 초기값
* 최소값 = 1(MIN_PRIORITY)
* 변경 시 `void setPriority(int priority)`, `int getPriority()` 사용
* 스레드는 부모 스레드와 동일한 우선순위 값을 가지고 탄생

### 6. 스레드 종료
* run() : 스스로 종료
* interrupt() : 타 스레드에서 강제 종료
* flag : 스레드 A가 스레드 B의 flag를 true로 만들면 스레드 B가 스스로 종료

### 7. 스레드 동기화
* 멀티스레드의 공유 데이터의 동시 접근 문제 해결책
    * 공유 데이터를 접근하는 모든 스레드의 한줄 세우기
    * 한 스레드가 공유 데이터에 대한 작업을 끝낼 때까지 다른 스레드가 대기하도록 함
* synchronized로 동기화 블록을 설정하거나 wait()-notify() 메소드로 스레드 실행 순서 제어
    * 모드 synchronized 블록 내에서만 사용
    * wait() : 다른 스레드가 notify()를 불러줄 때까지 대기
    * notify() : wait()를 호출하여 대기중인 스레드를 깨움. 오직 하나의 스레드만 깨움
    * notifyAll() : wait()를 호출하여 대기중인 모든 스레드를 깨움
